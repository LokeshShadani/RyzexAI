
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ryzex AI â€“ Chat â€¢ Image â€¢ Video â€¢ Audio</title>
  <style>
    body { font-family:'Segoe UI'; margin:0; padding:0; background:#f5f5f5; display:flex; flex-direction:column; height:100vh; }
    header { background:#111827; color:white; padding:1rem; text-align:center; font-size:1.5rem; font-weight:bold; }
    nav { display:flex; justify-content:center; gap:10px; padding:10px; background:#e0e7ff; }
    nav button { padding:10px 20px; border:none; border-radius:20px; background:#6366f1; color:white; cursor:pointer; font-weight:bold; }
    nav button.active { background:#4338ca; }
    #container { flex:1; overflow:auto; padding:1rem; display:flex; flex-direction:column; gap:1rem; }
    .message { max-width:80%; padding:10px 15px; border-radius:15px; line-height:1.5; }
    .user { align-self:flex-end; background:#d1fae5; }
    .bot { align-self:flex-start; background:#e5e7eb; }
    .input-section { display:flex; padding:1rem; gap:0.5rem; background:#ffffff; border-top:1px solid #ddd; }
    #input { flex:1; padding:0.75rem; border-radius:10px; border:1px solid #ccc; }
    button { border:none; border-radius:10px; padding:10px 15px; cursor:pointer; }
    #send-btn { background:#10b981; color:white; }
    #voice-btn { background:#60a5fa; color:white; }
    #image-input { display:none; }
    label[for="image-input"] { background:#f59e0b; color:white; padding:10px 15px; border-radius:10px; cursor:pointer; }
    img.uploaded-image, video.generated-video { max-width:80%; border-radius:12px; }
  </style>
</head>
<body>
  <header>ðŸ¤– Ryzex AI</header>
  <nav>
    <button onclick="selectTool('chat')" id="tool-chat" class="active">ðŸ’¬ Chat</button>
    <button onclick="selectTool('image')" id="tool-image">ðŸŽ¨ Image</button>
    <button onclick="selectTool('video')" id="tool-video">ðŸŽ¥ Video</button>
    <button onclick="selectTool('audio')" id="tool-audio">ðŸ”Š Audio</button>
  </nav>

  <div id="container"></div>

  <div class="input-section">
    <input type="text" id="input" placeholder="Type here..." />
    <button id="send-btn">Send</button>
    <button id="voice-btn">ðŸŽ¤</button>
    <label for="image-input">ðŸ“·</label>
    <input type="file" id="image-input" accept="image/*" />
  </div>

  <script>
    let tool = "chat";
    const container = document.getElementById("container");
    const input = document.getElementById("input");
    const sendBtn = document.getElementById("send-btn");
    const voiceBtn = document.getElementById("voice-btn");
    const imageInput = document.getElementById("image-input");

    function selectTool(selected) {
      tool = selected;
      document.querySelectorAll("nav button").forEach(btn => btn.classList.remove("active"));
      document.getElementById("tool-" + selected).classList.add("active");
    }

    function appendMessage(content, sender) {
      const div = document.createElement("div");
      div.classList.add("message", sender);
      div.textContent = content;
      container.appendChild(div);
      container.scrollTop = container.scrollHeight;
    }

    function appendImage(file) {
      const reader = new FileReader();
      reader.onload = () => {
        const img = document.createElement("img");
        img.src = reader.result;
        img.classList.add("uploaded-image");
        container.appendChild(img);
      };
      reader.readAsDataURL(file);
    }

    function appendVideo(blobURL) {
      const video = document.createElement("video");
      video.src = blobURL;
      video.controls = true;
      video.classList.add("generated-video");
      container.appendChild(video);
    }

    async function handleSubmit() {
      const text = input.value.trim();
      if (!text) return;
      appendMessage(text, "user");
      input.value = "";

      if (tool === "chat") {
        const res = await fetch("/chat", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ message: text })
        });
        const data = await res.json();
        appendMessage(data.response, "bot");
      } else if (tool === "image") {
        const res = await fetch("/generate-image", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ prompt: text })
        });
        const blob = await res.blob();
        const url = URL.createObjectURL(blob);
        appendImage({ result: url });
      } else if (tool === "video") {
        const res = await fetch("/generate-video", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ prompt: text })
        });
        const blob = await res.blob();
        const url = URL.createObjectURL(blob);
        appendVideo(url);
      }
    }

    sendBtn.onclick = handleSubmit;

    voiceBtn.onclick = () => {
      const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
      recognition.lang = "en-US";
      recognition.start();
      recognition.onresult = e => input.value = e.results[0][0].transcript;
      recognition.onerror = err => alert("Voice error: " + err.error);
    };

    imageInput.onchange = () => {
      const file = imageInput.files[0];
      if (file) appendImage(file);
    };
  </script>
</body>
</html>
