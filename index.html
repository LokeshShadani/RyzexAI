<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTFâ€‘8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Ryzex AI â€“ Chat â€¢ Image â€¢ Video â€¢ Audio</title>
  <style>
    body { font-family:'Segoe UI'; padding:20px; }
    .section { margin-bottom:30px; }
    button { padding:10px 20px; cursor:pointer; }
    img, video { max-width:100%; margin-top:15px; }
  </style>
</head>
<body>
  <h1>ðŸ¤– Ryzex AI</h1>

  <div class="section">
    <h2>Chat with AI</h2>
    <input id="chatIn" placeholder="Say something..." size="50"/>
    <button onclick="sendChat()">Send</button><br>
    <div id="chatOut"></div>
    <button onclick="speakReply()">ðŸ”Š Speak Reply</button>
  </div>

  <div class="section">
    <h2>Generate AI Image</h2>
    <input id="imgPrompt" placeholder="Describe image..."/>
    <button onclick="genImage()">Create Image</button><br>
    <img id="imgOut"/>
  </div>

  <div class="section">
    <h2>Upload Your Image</h2>
    <input type="file" id="imgUpload"/>
    <button onclick="uploadImage()">Upload</button><br><span id="uploadMsg"></span>
  </div>

  <div class="section">
    <h2>Text â†’ Video (short clip)</h2>
    <input id="videoPrompt" placeholder="Describe scene..."/>
    <button onclick="genVideo()">Create Video</button><br>
    <video id="vidOut" controls loop/>
  </div>

<script>
  let lastReply = "";

  async function sendChat(){
    const msg = document.getElementById("chatIn").value;
    let res = await fetch("/chat",{method:"POST",headers:{'Content-Type':'application/json'},body:JSON.stringify({message:msg})});
    let j=await res.json(); lastReply=j.reply;
    document.getElementById("chatOut").innerText = j.reply;
  }

  function speakReply(){
    if(!lastReply) return;
    const ut = new SpeechSynthesisUtterance(lastReply);
    speechSynthesis.speak(ut);
  }

  async function genImage(){
    const p = document.getElementById("imgPrompt").value;
    let res = await fetch("/generate-image",{method:"POST",headers:{'Content-Type':'application/json'},body:JSON.stringify({prompt:p})});
    let j=await res.json();
    if(j.image) document.getElementById("imgOut").src = j.image;
    else alert("Image failed");
  }

  async function uploadImage(){
    const f = document.getElementById("imgUpload").files[0];
    if(!f) return alert("Pick file");
    let fd=new FormData(); fd.append("image",f);
    let res=await fetch("/upload/image",{method:"POST",body:fd});
    let j=await res.json();
    document.getElementById("uploadMsg").innerText = j.message || j.error;
  }

  async function genVideo(){
    const p = document.getElementById("videoPrompt").value;
    let res = await fetch("/generate-video",{method:"POST",headers:{'Content-Type':'application/json'},body:JSON.stringify({prompt:p})});
    let j=await res.json();
    if(j.video) document.getElementById("vidOut").src = j.video;
    else alert("Video failed: "+(j.error||""));
  }
</script>
</body>
</html>
